{"version":3,"sources":["../../../../src/build/webpack/loaders/next-flight-action-entry-loader.ts"],"sourcesContent":["import { generateActionId } from './utils'\n\nexport type NextFlightActionEntryLoaderOptions = {\n  actions: string\n  encryptionKey: string\n}\n\nfunction nextFlightActionEntryLoader(this: any) {\n  const { actions, encryptionKey }: NextFlightActionEntryLoaderOptions =\n    this.getOptions()\n\n  const actionList = JSON.parse(actions) as [string, string[]][]\n  const individualActions = actionList\n    .map(([path, names]) => {\n      return names.map((name) => {\n        const id = generateActionId(encryptionKey, path, name)\n        return [id, path, name] as [string, string, string]\n      })\n    })\n    .flat()\n\n  return `\n${individualActions\n  .map(([id, path, name]) => {\n    // Re-export the same functions from the original module path as action IDs.\n    return `export { ${name} as \"${id}\" } from ${JSON.stringify(path)}`\n  })\n  .join('\\n')}\n`\n}\n\nexport default nextFlightActionEntryLoader\n"],"names":["generateActionId","nextFlightActionEntryLoader","actions","encryptionKey","getOptions","actionList","JSON","parse","individualActions","map","path","names","name","id","flat","stringify","join"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,UAAS;AAO1C,SAASC;IACP,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAE,GAC9B,IAAI,CAACC,UAAU;IAEjB,MAAMC,aAAaC,KAAKC,KAAK,CAACL;IAC9B,MAAMM,oBAAoBH,WACvBI,GAAG,CAAC,CAAC,CAACC,MAAMC,MAAM;QACjB,OAAOA,MAAMF,GAAG,CAAC,CAACG;YAChB,MAAMC,KAAKb,iBAAiBG,eAAeO,MAAME;YACjD,OAAO;gBAACC;gBAAIH;gBAAME;aAAK;QACzB;IACF,GACCE,IAAI;IAEP,OAAO,CAAC;AACV,EAAEN,kBACCC,GAAG,CAAC,CAAC,CAACI,IAAIH,MAAME,KAAK;QACpB,4EAA4E;QAC5E,OAAO,CAAC,SAAS,EAAEA,KAAK,KAAK,EAAEC,GAAG,SAAS,EAAEP,KAAKS,SAAS,CAACL,MAAM,CAAC;IACrE,GACCM,IAAI,CAAC,MAAM;AACd,CAAC;AACD;AAEA,eAAef,4BAA2B"}