{"ast":null,"code":"import React,{useState,useEffect}from'react';import BaseLayout from'../../components/layouts/BaseLayout';import UserCard from'../../components/molecules/card/index';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const fetchUsers=async()=>{try{const token=localStorage.getItem('authToken');if(!token){console.error(\"No token found in localStorage.\");return;}const response=await fetch('http://localhost:5000/api/users',{headers:{'Authorization':`Bearer ${token}`}});if(!response.ok)throw new Error('Failed to fetch users');const data=await response.json();setUsers(data);}catch(error){console.error('Error fetching users:',error);}};useEffect(()=>{fetchUsers();},[]);const addUser=async()=>{const token=localStorage.getItem('authToken');if(!token){console.error(\"No token found in localStorage.\");return;}const newUser={username:'New User',role:'user'};try{const response=await fetch('http://localhost:5000/api/users',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`// Attach the token here as well\n},body:JSON.stringify(newUser)});if(!response.ok)throw new Error('Failed to add user');const data=await response.json();setUsers(prevUsers=>[...prevUsers,data]);}catch(error){console.error('Error adding user:',error);}};return/*#__PURE__*/_jsx(BaseLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-red-800 min-h-screen\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addUser,className:\"mb-4 px-4 py-2 bg-green-500 text-white font-bold rounded-lg\",children:\"Add New User\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:users.map(user=>/*#__PURE__*/_jsx(UserCard,{username:user.username,role:user.role},user._id))})]})});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","BaseLayout","UserCard","jsx","_jsx","jsxs","_jsxs","UserManagement","users","setUsers","fetchUsers","token","localStorage","getItem","console","error","response","fetch","headers","ok","Error","data","json","addUser","newUser","username","role","method","body","JSON","stringify","prevUsers","children","className","onClick","map","user","_id"],"sources":["C:/Users/user/Documents/sales-report/fe/src/pages/login/LoginPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport BaseLayout from '../../components/layouts/BaseLayout';\r\nimport UserCard from '../../components/molecules/card/index';\r\n\r\ninterface User {\r\n  _id: string;\r\n  username: string;\r\n  role: string;\r\n}\r\n\r\nconst UserManagement: React.FC = () => {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        console.error(\"No token found in localStorage.\");\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('http://localhost:5000/api/users', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to fetch users');\r\n      const data = await response.json();\r\n      setUsers(data);\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const addUser = async () => {\r\n    const token = localStorage.getItem('authToken');\r\n    if (!token) {\r\n      console.error(\"No token found in localStorage.\");\r\n      return;\r\n    }\r\n\r\n    const newUser = { username: 'New User', role: 'user' };\r\n    \r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/users', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,  // Attach the token here as well\r\n        },\r\n        body: JSON.stringify(newUser),\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Failed to add user');\r\n      const data = await response.json();\r\n      setUsers((prevUsers) => [...prevUsers, data]);\r\n    } catch (error) {\r\n      console.error('Error adding user:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <BaseLayout>\r\n      <div className=\"p-6 bg-red-800 min-h-screen\">\r\n        <button\r\n          onClick={addUser}\r\n          className=\"mb-4 px-4 py-2 bg-green-500 text-white font-bold rounded-lg\"\r\n        >\r\n          Add New User\r\n        </button>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {users.map((user) => (\r\n            <UserCard key={user._id} username={user.username} role={user.role} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </BaseLayout>\r\n  );\r\n};\r\n\r\nexport default UserManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}